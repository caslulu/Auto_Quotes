{% extends "base.html" %}
{% block content %}
{% from 'bootstrap5/form.html' import render_form %}
<div class="container mt-4">
    <div class="row">

        <!-- Seleção única de Cotação/Carta -->
        <div class="col-12 mb-4">
            <label for="cotacao_id_topo"><strong>Selecione a Cotação/Carta:</strong></label>
            <select id="cotacao_id_topo" class="form-select" required>
                <option value="" disabled selected>Escolha...</option>
                {% for cot in cotacoes %}
                    <option value="{{ cot.id }}">
                        {{ cot.nome }} | {{ cot.documento }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Seguradoras -->
        <div class="col-12 mb-3 text-center">
            {{ form_seguradora.seguradora.label }}<br>
            {% for subfield in form_seguradora.seguradora %}
            <label class="form-check form-check-inline">
                {{ subfield(class="form-check-input") }}
                {{ subfield.label(class="form-check-label") }}
            </label>
            {% endfor %}
        </div>

        <!-- Formulário Quitado -->
        <div class="col-md-5">
            <h4>Veículo Quitado</h4>
            <form class="small-form" method="post">
                {{ form_quitado.hidden_tag() }}
                <input type="hidden" name="form_type" value="quitado">
                <input type="hidden" name="cotacao_id" id="cotacao_id_quitado">
                <input type="hidden" name="seguradora" id="seguradora_quitado"
                    value="{{ form_seguradora.seguradora.data }}">
                <div class="row mb-2">
                    <div class="col-12 text-center">
                        {{ form_quitado.nome.label }}
                        {{ form_quitado.nome(class="form-control d-inline-block", style="max-width:300px;") }}
                    </div>
                </div>
                <div class="row">
                    <!-- Básico -->
                    <div class="col-6">
                        <h6>Básico</h6>
                        {{ form_quitado.entrada_basico.label }}
                        {{ form_quitado.entrada_basico(class="form-control") }}
                        {{ form_quitado.mensal_basico.label }}
                        {{ form_quitado.mensal_basico(class="form-control") }}
                        {{ form_quitado.valor_total_basico.label }}
                        {{ form_quitado.valor_total_basico(class="form-control") }}
                    </div>
                    <!-- Completo -->
                    <div class="col-6">
                        <h6>Completo</h6>
                        {{ form_quitado.entrada_completo.label }}
                        {{ form_quitado.entrada_completo(class="form-control") }}
                        {{ form_quitado.mensal_completo.label }}
                        {{ form_quitado.mensal_completo(class="form-control") }}
                        {{ form_quitado.valor_total_completo.label }}
                        {{ form_quitado.valor_total_completo(class="form-control") }}
                    </div>
                </div>
                <div class="mt-2">
                    {{ form_quitado.submit(class="btn btn-primary") }}
                </div>
            </form>
        </div>

        <!-- Linha Vertical -->
        <div class="col-md-1 d-flex justify-content-center align-items-center">
            <div class="vr"></div>
        </div>

        <!-- Formulário Financiado -->
        <div class="col-md-5">
            <h4>Veículo Financiado</h4>
            <form class="small-form" method="post">
                <input type="hidden" name="form_type" value="financiado">
                <input type="hidden" name="cotacao_id" id="cotacao_id_financiado">
                <input type="hidden" name="seguradora" id="seguradora_financiado"
                    value="{{ form_seguradora.seguradora.data }}">
                {{ render_form(form_financiado) }}
            </form>
        </div>
    </div>
</div>
{% endblock %}